
    :root {
      --bg: #f6f8fb;
      --surface: #ffffff;
      --surface-2: #f1f4fb;
      --border: #dfe6f3;
      --accent: #2f8efb;
      --accent-2: #4ad1c6;
      --text: #1f2d3d;
      --muted: #6b7a90;
      --error: #e15c5c;
      --success: #2dbe8c;
      --warn: #f2c84b;
      --shadow: 0 12px 30px rgba(17, 38, 88, 0.12);
      --radius: 14px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Pretendard", "Noto Sans KR", "Segoe UI", sans-serif;
      background: radial-gradient(140% 120% at 10% 0%, rgba(79,143,255,0.10), transparent 35%), radial-gradient(120% 140% at 90% 10%, rgba(74,209,198,0.12), transparent 45%), var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 0 20px 48px;
    }
    a { color: inherit; text-decoration: none; }
    header {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(12px);
      background: rgba(255, 255, 255, 0.9);
      border-bottom: 1px solid var(--border);
    }
    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 6px;
      max-width: 1200px;
      margin: 0 auto;
      gap: 16px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      letter-spacing: 0.6px;
      cursor: pointer;
    }
    .brand-mark {
      width: 34px;
      height: 34px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      display: grid;
      place-items: center;
      color: #ffffff;
      font-weight: 900;
      font-size: 16px;
      box-shadow: 0 10px 30px rgba(79,143,255,0.25);
    }
    .tabs {
      display: flex;
      gap: 12px;
      flex: 1;
      justify-content: center;
      flex-wrap: wrap;
    }
    .tab {
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f7faff;
      color: var(--muted);
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 600;
    }
    .tab.active {
      color: #fff;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 10px 25px rgba(79,143,255,0.25);
      border-color: transparent;
    }
    .nav-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .badge {
      padding: 6px 10px;
      border-radius: 10px;
      background: #eef4ff;
      border: 1px solid var(--border);
      font-size: 12px;
      color: var(--text);
    }
    .btn {
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .btn.primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #fff;
      border: none;
      box-shadow: 0 12px 30px rgba(79,143,255,0.25);
    }
    .btn .throbber {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.5);
      border-top-color: #fff;
      display: none;
      animation: spin 0.8s linear infinite;
    }
    .btn.is-loading .throbber { display: inline-block; }
    .btn.is-loading { pointer-events: none; }
    .btn.ghost { background: transparent; }
    .btn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
    }
    main {
      max-width: 1200px;
      margin: 24px auto 0;
    }
    section {
      display: none;
      animation: fadeIn 0.35s ease;
    }
    section.active { display: block; }
    .hero {
      border-radius: 18px;
      padding: 22px 28px;
      box-shadow: none;
      text-align: center;
      background: transparent;
      border: none;
    }
    .hero h1 { margin: 0 0 10px; font-size: 26px; color: #0f1e33; }
    .hero p { margin: 4px 0 14px; color: var(--muted); }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 10px;
      background: rgba(97,168,255,0.12);
      color: var(--text);
      font-size: 12px;
      border: 1px solid var(--border);
    }
    .layout {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 16px;
      margin-top: 16px;
    }
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
    }
    .card h3 { margin: 0 0 10px; font-size: 18px; }
    .muted { color: var(--muted); font-size: 14px; margin: 6px 0 12px; }
    .field {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 12px;
    }
    .field label { color: var(--muted); font-size: 13px; }
    .input {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--surface-2);
      color: var(--text);
      font-size: 14px;
    }
    .dropzone {
      border: 1.5px dashed var(--border);
      border-radius: 14px;
      padding: 26px;
      text-align: center;
      background: #f9fbff;
      transition: all 0.2s ease;
      cursor: pointer;
    }
    .drop-icon {
      width: 120px;
      height: 90px;
      margin: 0 auto 10px;
      background: url("data:image/svg+xml,%3Csvg width='140' height='120' viewBox='0 0 140 120' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='20' y='16' width='100' height='88' rx='10' stroke='%2399b8dc' stroke-width='4' stroke-dasharray='10 8' opacity='0.55'/%3E%3Cpath d='M50 64L70 44L90 64' stroke='%2399b8dc' stroke-width='6' stroke-linecap='round' stroke-linejoin='round' opacity='0.65'/%3E%3Cpath d='M70 44V88' stroke='%2399b8dc' stroke-width='6' stroke-linecap='round' opacity='0.65'/%3E%3C/svg%3E") center/contain no-repeat;
      opacity: 0.9;
    }
    .dropzone.dragover {
      border-color: var(--accent);
      background: #e9f1ff;
      box-shadow: 0 10px 30px rgba(79,143,255,0.18);
    }
    .file-list { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }
    .file-row {
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px 12px;
      display: grid;
      grid-template-columns: 1.2fr 0.6fr 0.8fr 0.9fr 1.4fr auto;
      gap: 10px;
      align-items: center;
    }
    .file-name { font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .file-log { color: var(--muted); font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .progress {
      width: 100%;
      height: 8px;
      border-radius: 12px;
      background: rgba(31,44,62,0.8);
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width 0.25s ease;
    }
    .status-line {
      font-size: 13px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .status-pill {
      padding: 4px 8px;
      border-radius: 8px;
      font-size: 12px;
      border: 1px solid var(--border);
      color: var(--muted);
      width: 80px;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .status-pill.ready { color: var(--text); }
    .status-pill.uploading { color: var(--accent-2); border-color: rgba(97,168,255,0.4); }
    .status-pill.processing { color: var(--accent); border-color: rgba(109,243,195,0.4); }
    .status-pill.done { color: var(--success); border-color: rgba(109,243,195,0.5); }
    .status-pill.failed { color: var(--error); border-color: rgba(255,107,107,0.5); }
    .actions-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .actions-center { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 12px; }
    .convert-header { display: flex; align-items: center; justify-content: space-between; gap: 16px; flex-wrap: wrap; margin-bottom: 8px; }
    .convert-toggle { display: inline-flex; align-items: center; gap: 6px; padding: 4px; border-radius: 999px; background: var(--surface-2); border: 1px solid var(--border); }
    .convert-toggle .toggle-btn { border: none; background: transparent; padding: 6px 12px; border-radius: 999px; font-size: 12px; font-weight: 600; color: var(--muted); cursor: pointer; }
    .convert-toggle .toggle-btn.active { background: var(--accent); color: #fff; }
    .add-card {
      border: 1px dashed var(--border);
      border-radius: 12px;
      padding: 12px;
      text-align: center;
      color: var(--muted);
      cursor: pointer;
      transition: all 0.2s ease;
      background: #f9fbff;
    }
    .add-card:hover {
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 10px 20px rgba(109,243,195,0.1);
    }
    .tab-layout {
      display: grid;
      grid-template-columns: 200px 1fr;
      gap: 12px;
      align-items: start;
    }
    .tab-rail {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .tab-rail button {
      width: 100%;
      justify-content: flex-start;
    }
    .tab-rail button.active {
      border-color: var(--accent);
      color: var(--text);
      background: rgba(109,243,195,0.12);
    }
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }
    .row-select {
      display: grid;
      grid-template-columns: 140px 1fr 1fr;
      gap: 10px;
      align-items: center;
      margin-bottom: 12px;
    }
    .row-select label { color: var(--muted); }
    .row-select.compact { grid-template-columns: 130px 1fr; margin-bottom: 8px; }
    .config-columns {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
      margin-top: 12px;
      width: 100%;
    }
    .config-columns > div {
      min-width: 0;
    }
    .config-card {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      background: var(--surface-2);
    }
    .config-card h4 { margin: 0 0 8px; }
    .smart-select {
      position: relative;
    }
    .compact-select .smart-display { padding: 8px; font-size: 13px; }
    .compact-select .smart-dropdown { padding: 6px; }
    .compact-select .smart-search { padding: 6px; }
    .smart-display {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--surface-2);
      color: var(--text);
      cursor: pointer;
    }
    .smart-display .muted { margin: 0; color: var(--muted); }
    .smart-dropdown {
      position: absolute;
      top: 110%;
      left: 0;
      right: 0;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      box-shadow: var(--shadow);
      padding: 8px;
      z-index: 30;
      display: none;
    }
    .smart-select.open .smart-dropdown { display: block; }
    .smart-search {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--surface-2);
      color: var(--text);
      margin-bottom: 8px;
    }
    .smart-list {
      max-height: 200px;
      overflow: auto;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .smart-option {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--text);
    }
    .accordion {
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      background: var(--surface-2);
      margin-top: 12px;
    }
    .acc-header {
      padding: 12px 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      background: rgba(255,255,255,0.02);
    }
    .acc-header::after {
      content: "\25BE";
      color: var(--muted);
      font-size: 14px;
      transition: opacity 0.2s ease;
    }
    .acc-header.open::after {
      content: "\25B4";
    }
    .acc-body {
      padding: 14px;
      border-top: 1px solid var(--border);
      display: none;
    }
    .acc-body.open { display: block; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
      font-size: 13px;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 8px;
      text-align: left;
      color: var(--text);
    }
    th { background: rgba(255,255,255,0.03); }
    .table-wrap {
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: auto;
      max-height: 260px;
    }
    .table-wrap.sticky-table {
      max-height: 360px;
    }
    .table-wrap.sticky-table thead th {
      position: sticky;
      top: 0;
      background: var(--surface-2);
      z-index: 3;
    }
    .table-wrap.sticky-table th,
    .table-wrap.sticky-table td {
      background: var(--surface-2);
    }
    .table-wrap.sticky-table th { white-space: nowrap; }
    .table-wrap.sticky-table th.sortable { cursor: pointer; user-select: none; }
    .table-wrap.sticky-table th.sortable:hover { background: rgba(255,255,255,0.06); }
    .color-patch {
      display: inline-block;
      width: 16px;
      height: 16px;
      border-radius: 3px;
      border: 1px solid rgba(255,255,255,0.18);
      vertical-align: middle;
    }
    .sort-arrow {
      font-size: 10px;
      opacity: 0.65;
      margin-left: 4px;
      display: inline-block;
      line-height: 1;
    }
    .sort-arrow.muted { opacity: 0.35; }
    .table-wrap.sticky-table th.col-handle,
    .table-wrap.sticky-table td.col-handle { width: 90px; }
    .table-wrap.sticky-table th.col-type,
    .table-wrap.sticky-table td.col-type { width: 90px; }
    .table-wrap.sticky-table th.col-layer,
    .table-wrap.sticky-table td.col-layer { width: 140px; }
    .table-wrap.sticky-table th.col-coord,
    .table-wrap.sticky-table td.col-coord { width: 110px; text-align: left; }
    .table-wrap.sticky-table th.col-text,
    .table-wrap.sticky-table td.col-text { width: 180px; }
    .table-wrap.sticky-table th.col-name,
    .table-wrap.sticky-table td.col-name { width: 140px; }
    .table-wrap.sticky-table th.col-radius,
    .table-wrap.sticky-table td.col-radius { width: 100px; text-align: left; }
    .table-wrap.sticky-table th.col-dim,
    .table-wrap.sticky-table td.col-dim { width: 100px; text-align: left; }
    .table-wrap.sticky-table th { text-align: center; }
    .table-wrap.sticky-table td { text-align: left; }
    .table-wrap.sticky-table td.col-handle { text-align: center; }
    .table-wrap.sticky-table th.col-coord,
    .table-wrap.sticky-table th.col-radius,
    .table-wrap.sticky-table th.col-dim { text-align: center; }
    .preview-frame {
      width: 100%;
      height: 340px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: #f7faff;
    }
    .viewer-loading {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(247, 250, 255, 0.6);
      backdrop-filter: blur(2px);
    }
    .viewer-loading .throbber {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 3px solid rgba(47, 142, 251, 0.3);
      border-top-color: var(--accent);
      animation: spin 0.8s linear infinite;
    }
    .tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 10px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      font-size: 12px;
    }
    .pill-success { color: var(--success); }
    .pill-warn { color: var(--warn); }
    .pill-error { color: var(--error); }
    .capsule {
      background: rgba(97,168,255,0.1);
      border: 1px solid var(--border);
      padding: 10px 12px;
      border-radius: 12px;
      margin-bottom: 10px;
      display: inline-flex;
      gap: 8px;
      align-items: center;
      font-size: 13px;
      color: var(--text);
    }
    .pill-lock {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 10px;
      background: rgba(255,255,255,0.03);
      border: 1px dashed var(--border);
      color: var(--muted);
      font-size: 13px;
    }
    .color-swatch {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 3px;
      border: 1px solid var(--border);
      vertical-align: middle;
      margin-right: 6px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    /* ── AI 도면 생성 ── */
    .generate-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .generate-header h3 { margin: 0; }
    .session-list {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding: 4px 0;
    }
    .session-item {
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 2px;
      padding: 8px 14px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--surface-2);
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 140px;
    }
    .session-item.active {
      border-color: var(--accent);
      background: rgba(47, 142, 251, 0.08);
    }
    .session-title {
      font-weight: 600;
      font-size: 13px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 160px;
    }
    .session-meta {
      font-size: 11px;
      color: var(--muted);
    }
    .generate-workspace {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    .generate-split {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 14px;
      min-height: 400px;
    }
    .generate-history-panel {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .generate-history-panel h4,
    .generate-preview-panel h4 {
      margin: 0 0 4px;
      font-size: 14px;
      color: var(--muted);
    }
    .chat-history {
      flex: 1;
      overflow-y: auto;
      max-height: 380px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 8px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--surface-2);
    }
    .chat-message {
      padding: 8px 12px;
      border-radius: 10px;
      font-size: 13px;
      line-height: 1.5;
    }
    .chat-message.user {
      background: rgba(47, 142, 251, 0.1);
      align-self: flex-end;
      max-width: 90%;
    }
    .chat-message.assistant {
      background: var(--surface);
      border: 1px solid var(--border);
      align-self: flex-start;
      max-width: 90%;
    }
    .chat-role {
      display: block;
      font-size: 11px;
      font-weight: 700;
      color: var(--muted);
      margin-bottom: 2px;
    }
    .chat-content {
      display: block;
      word-break: break-word;
    }
    .generate-preview-panel {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .generate-preview {
      flex: 1;
      min-height: 340px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: #f7faff;
      overflow: hidden;
    }
    .version-list {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }
    .version-item {
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      border: 1px solid var(--border);
      background: var(--surface-2);
      cursor: pointer;
      transition: all 0.15s ease;
    }
    .version-item.active {
      border-color: var(--accent);
      background: rgba(47, 142, 251, 0.1);
      color: var(--accent);
    }
    .generate-input-area {
      display: flex;
      gap: 10px;
      align-items: flex-end;
    }
    .generate-prompt {
      flex: 1;
      resize: vertical;
      min-height: 44px;
      font-family: inherit;
    }
    .generate-actions {
      display: flex;
      gap: 6px;
      flex-shrink: 0;
    }
    .generate-download {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      padding-top: 8px;
      border-top: 1px solid var(--border);
      align-items: center;
    }
    .template-select-wrap {
      display: flex;
      flex-wrap: nowrap;
      align-items: center;
      gap: 8px;
      margin-right: auto;
    }
    .template-select-wrap label {
      font-size: 13px;
      color: var(--muted);
      white-space: nowrap;
    }
    .template-select-wrap select {
      font-size: 13px;
      padding: 4px 8px;
    }
    /* 참조 파일 선택 */
    .ref-file-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .ref-file-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--surface-2);
      cursor: pointer;
      transition: border-color 0.15s, background 0.15s;
      font-size: 13px;
    }
    .ref-file-item:hover {
      border-color: var(--accent);
    }
    .ref-file-item.selected {
      border-color: var(--accent);
      background: color-mix(in srgb, var(--accent) 10%, var(--surface-2));
    }
    .ref-file-item input[type="checkbox"] {
      accent-color: var(--accent);
    }
    .ref-file-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .ref-file-id {
      font-family: var(--mono);
      font-weight: 600;
    }
    .ref-file-meta {
      color: var(--muted);
      font-size: 11px;
    }
    /* 모달 */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      animation: fadeIn 0.2s ease;
    }
    .modal-content {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      width: 90%;
      max-width: 640px;
      max-height: 80vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      border-bottom: 1px solid var(--border);
    }
    .modal-header h3 { margin: 0; font-size: 16px; }
    .modal-close {
      background: none;
      border: none;
      font-size: 22px;
      cursor: pointer;
      color: var(--muted);
      padding: 0 4px;
    }
    .modal-body {
      padding: 18px;
      overflow-y: auto;
    }

    @media (max-width: 960px) {
      .layout { grid-template-columns: 1fr; }
      .file-row { grid-template-columns: 1fr; }
      .generate-split { grid-template-columns: 1fr; }
    }
  

